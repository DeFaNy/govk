// Code generated by https://github.com/defany/govk. DO NOT EDIT.

package tests

import (
	"github.com/defany/govk/api/gen/models"
	"github.com/defany/govk/api/gen/users"
	"github.com/stretchr/testify/assert"
	"github.com/stretchr/testify/require"
	"github.com/defany/govk/vk"
	"testing"
	"encoding/json"
)

func fillRandomlyUsersGetRequest(r *requests.UsersGetRequest) {
	lUserIds := randIntn(maxArrayLength + 1)
	r.WithUserIds(randStringArr(lUserIds))
	Fields := new([]models.UsersFields)
	lFields := randIntn(maxArrayLength + 1)
	*Fields = make([]models.UsersFields, lFields)
	for i0 := 0; i0 < lFields; i0++ {
		fillRandomlyUsersFields(&(*Fields)[i0])
	}
	r.WithFields(*Fields)
	r.WithNameCase(randString())
}

func TestVKUsersGetSuccess(t *testing.T) {
	params := requests.NewUsersGetRequest()
	fillRandomlyUsersGetRequest(&params)
	var expected models.UsersGetResponse
	fillRandomlyUsersGetResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "users.get", params.Params(), expectedJSON))
	resp, err := vk.Api.Users.UsersGet(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyUsersGetFollowersRequest(r *requests.UsersGetFollowersRequest) {
	r.WithUserId(randInt())
	r.WithOffset(randInt())
	r.WithCount(randInt())
	Fields := new([]models.UsersFields)
	lFields := randIntn(maxArrayLength + 1)
	*Fields = make([]models.UsersFields, lFields)
	for i0 := 0; i0 < lFields; i0++ {
		fillRandomlyUsersFields(&(*Fields)[i0])
	}
	r.WithFields(*Fields)
	r.WithNameCase(randString())
}

func TestVKUsersGetFollowersSuccess(t *testing.T) {
	params := requests.NewUsersGetFollowersRequest()
	fillRandomlyUsersGetFollowersRequest(&params)
	var expected models.UsersGetFollowersResponse
	fillRandomlyUsersGetFollowersResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "users.getFollowers", params.Params(), expectedJSON))
	resp, err := vk.Api.Users.UsersGetFollowers(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyUsersGetSubscriptionsRequest(r *requests.UsersGetSubscriptionsRequest) {
	r.WithUserId(randInt())
	r.WithExtended(randBool())
	r.WithOffset(randInt())
	r.WithCount(randInt())
	Fields := new([]models.UsersFields)
	lFields := randIntn(maxArrayLength + 1)
	*Fields = make([]models.UsersFields, lFields)
	for i0 := 0; i0 < lFields; i0++ {
		fillRandomlyUsersFields(&(*Fields)[i0])
	}
	r.WithFields(*Fields)
}

func TestVKUsersGetSubscriptionsSuccess(t *testing.T) {
	params := requests.NewUsersGetSubscriptionsRequest()
	fillRandomlyUsersGetSubscriptionsRequest(&params)
	params.WithExtended(false)
	var expected models.UsersGetSubscriptionsResponse
	fillRandomlyUsersGetSubscriptionsResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "users.getSubscriptions", params.Params(), expectedJSON))
	resp, err := vk.Api.Users.UsersGetSubscriptions(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func TestVKUsersGetSubscriptionsExtendedSuccess(t *testing.T) {
	params := requests.NewUsersGetSubscriptionsRequest()
	fillRandomlyUsersGetSubscriptionsRequest(&params)
	params.WithExtended(true)
	var expected models.UsersGetSubscriptionsExtendedResponse
	fillRandomlyUsersGetSubscriptionsExtendedResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "users.getSubscriptions", params.Params(), expectedJSON))
	resp, err := vk.Api.Users.UsersGetSubscriptionsExtended(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyUsersReportRequest(r *requests.UsersReportRequest) {
	r.WithUserId(randInt())
	r.WithType(randString())
	r.WithComment(randString())
}

func TestVKUsersReportSuccess(t *testing.T) {
	params := requests.NewUsersReportRequest()
	fillRandomlyUsersReportRequest(&params)
	var expected models.BaseOkResponse
	fillRandomlyBaseOkResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "users.report", params.Params(), expectedJSON))
	resp, err := vk.Api.Users.UsersReport(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyUsersSearchRequest(r *requests.UsersSearchRequest) {
	r.WithQ(randString())
	r.WithSort(randInt())
	r.WithOffset(randInt())
	r.WithCount(randInt())
	Fields := new([]models.UsersFields)
	lFields := randIntn(maxArrayLength + 1)
	*Fields = make([]models.UsersFields, lFields)
	for i0 := 0; i0 < lFields; i0++ {
		fillRandomlyUsersFields(&(*Fields)[i0])
	}
	r.WithFields(*Fields)
	r.WithCity(randInt())
	r.WithCountry(randInt())
	r.WithHometown(randString())
	r.WithUniversityCountry(randInt())
	r.WithUniversity(randInt())
	r.WithUniversityYear(randInt())
	r.WithUniversityFaculty(randInt())
	r.WithUniversityChair(randInt())
	r.WithSex(randInt())
	r.WithStatus(randInt())
	r.WithAgeFrom(randInt())
	r.WithAgeTo(randInt())
	r.WithBirthDay(randInt())
	r.WithBirthMonth(randInt())
	r.WithBirthYear(randInt())
	r.WithOnline(randBool())
	r.WithHasPhoto(randBool())
	r.WithSchoolCountry(randInt())
	r.WithSchoolCity(randInt())
	r.WithSchoolClass(randInt())
	r.WithSchool(randInt())
	r.WithSchoolYear(randInt())
	r.WithReligion(randString())
	r.WithCompany(randString())
	r.WithPosition(randString())
	r.WithGroupId(randInt())
	lFromList := randIntn(maxArrayLength + 1)
	r.WithFromList(randStringArr(lFromList))
}

func TestVKUsersSearchSuccess(t *testing.T) {
	params := requests.NewUsersSearchRequest()
	fillRandomlyUsersSearchRequest(&params)
	var expected models.UsersSearchResponse
	fillRandomlyUsersSearchResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "users.search", params.Params(), expectedJSON))
	resp, err := vk.Api.Users.UsersSearch(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

