// Code generated by https://github.com/defany/govk. DO NOT EDIT.

package tests

import (
	"github.com/defany/govk/api/gen/models"
	"github.com/defany/govk/api/gen/store"
	"github.com/stretchr/testify/assert"
	"github.com/stretchr/testify/require"
	"github.com/defany/govk/vk"
	"testing"
	"encoding/json"
)

func fillRandomlyStoreAddStickersToFavoriteRequest(r *requests.StoreAddStickersToFavoriteRequest) {
	lStickerIds := randIntn(maxArrayLength + 1)
	r.WithStickerIds(randIntArr(lStickerIds))
}

func TestVKStoreAddStickersToFavoriteSuccess(t *testing.T) {
	params := requests.NewStoreAddStickersToFavoriteRequest()
	fillRandomlyStoreAddStickersToFavoriteRequest(&params)
	var expected models.BaseOkResponse
	fillRandomlyBaseOkResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "store.addStickersToFavorite", params.Params(), expectedJSON))
	resp, err := vk.Api.Store.StoreAddStickersToFavorite(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func TestVKStoreGetFavoriteStickersSuccess(t *testing.T) {
	var expected models.StoreGetFavoriteStickersResponse
	fillRandomlyStoreGetFavoriteStickersResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "store.getFavoriteStickers", nil, expectedJSON))
	resp, err := vk.Api.Store.StoreGetFavoriteStickers()
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyStoreGetProductsRequest(r *requests.StoreGetProductsRequest) {
	r.WithType(randString())
	r.WithMerchant(randString())
	r.WithSection(randString())
	lProductIds := randIntn(maxArrayLength + 1)
	r.WithProductIds(randIntArr(lProductIds))
	lFilters := randIntn(maxArrayLength + 1)
	r.WithFilters(randStringArr(lFilters))
	r.WithExtended(randBool())
}

func TestVKStoreGetProductsSuccess(t *testing.T) {
	params := requests.NewStoreGetProductsRequest()
	fillRandomlyStoreGetProductsRequest(&params)
	var expected models.StoreGetProductsResponse
	fillRandomlyStoreGetProductsResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "store.getProducts", params.Params(), expectedJSON))
	resp, err := vk.Api.Store.StoreGetProducts(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyStoreGetStickersKeywordsRequest(r *requests.StoreGetStickersKeywordsRequest) {
	lStickersIds := randIntn(maxArrayLength + 1)
	r.WithStickersIds(randIntArr(lStickersIds))
	lProductsIds := randIntn(maxArrayLength + 1)
	r.WithProductsIds(randIntArr(lProductsIds))
	r.WithAliases(randBool())
	r.WithAllProducts(randBool())
	r.WithNeedStickers(randBool())
}

func TestVKStoreGetStickersKeywordsSuccess(t *testing.T) {
	params := requests.NewStoreGetStickersKeywordsRequest()
	fillRandomlyStoreGetStickersKeywordsRequest(&params)
	var expected models.StoreGetStickersKeywordsResponse
	fillRandomlyStoreGetStickersKeywordsResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "store.getStickersKeywords", params.Params(), expectedJSON))
	resp, err := vk.Api.Store.StoreGetStickersKeywords(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyStoreRemoveStickersFromFavoriteRequest(r *requests.StoreRemoveStickersFromFavoriteRequest) {
	lStickerIds := randIntn(maxArrayLength + 1)
	r.WithStickerIds(randIntArr(lStickerIds))
}

func TestVKStoreRemoveStickersFromFavoriteSuccess(t *testing.T) {
	params := requests.NewStoreRemoveStickersFromFavoriteRequest()
	fillRandomlyStoreRemoveStickersFromFavoriteRequest(&params)
	var expected models.BaseOkResponse
	fillRandomlyBaseOkResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "store.removeStickersFromFavorite", params.Params(), expectedJSON))
	resp, err := vk.Api.Store.StoreRemoveStickersFromFavorite(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

