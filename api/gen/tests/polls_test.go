// Code generated by https://github.com/defany/govk. DO NOT EDIT.

package tests

import (
	"encoding/json"
	"github.com/defany/govk/api/gen/models"
	"github.com/defany/govk/api/gen/polls"
	"github.com/defany/govk/pkg/random"
	"github.com/defany/govk/vk"
	"github.com/stretchr/testify/assert"
	"github.com/stretchr/testify/require"
	"testing"
)

func fillRandomlyPollsAddVoteRequest(r *requests.PollsAddVoteRequest) {
	r.WithOwnerId(random.RandInt())
	r.WithPollId(random.RandInt())
	lAnswerIds := random.RandIntn(random.MaxArrayLength + 1)
	r.WithAnswerIds(random.RandIntArr(lAnswerIds))
	r.WithIsBoard(random.RandBool())
}

func TestVKPollsAddVoteSuccess(t *testing.T) {
	params := requests.NewPollsAddVoteRequest()
	fillRandomlyPollsAddVoteRequest(&params)
	var expected models.PollsAddVoteResponse
	fillRandomlyPollsAddVoteResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.RandString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "polls.addVote", params.Params(), expectedJSON))
	resp, err := vk.Api.Polls.PollsAddVote(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyPollsCreateRequest(r *requests.PollsCreateRequest) {
	r.WithQuestion(random.RandString())
	r.WithIsAnonymous(random.RandBool())
	r.WithIsMultiple(random.RandBool())
	r.WithEndDate(random.RandInt())
	r.WithOwnerId(random.RandInt())
	r.WithAppId(random.RandInt())
	r.WithAddAnswers(random.RandString())
	r.WithPhotoId(random.RandInt())
	r.WithBackgroundId(random.RandInt())
	r.WithDisableUnvote(random.RandBool())
}

func TestVKPollsCreateSuccess(t *testing.T) {
	params := requests.NewPollsCreateRequest()
	fillRandomlyPollsCreateRequest(&params)
	var expected models.PollsCreateResponse
	fillRandomlyPollsCreateResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.RandString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "polls.create", params.Params(), expectedJSON))
	resp, err := vk.Api.Polls.PollsCreate(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyPollsDeleteVoteRequest(r *requests.PollsDeleteVoteRequest) {
	r.WithOwnerId(random.RandInt())
	r.WithPollId(random.RandInt())
	r.WithAnswerId(random.RandInt())
	r.WithIsBoard(random.RandBool())
}

func TestVKPollsDeleteVoteSuccess(t *testing.T) {
	params := requests.NewPollsDeleteVoteRequest()
	fillRandomlyPollsDeleteVoteRequest(&params)
	var expected models.PollsDeleteVoteResponse
	fillRandomlyPollsDeleteVoteResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.RandString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "polls.deleteVote", params.Params(), expectedJSON))
	resp, err := vk.Api.Polls.PollsDeleteVote(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyPollsEditRequest(r *requests.PollsEditRequest) {
	r.WithOwnerId(random.RandInt())
	r.WithPollId(random.RandInt())
	r.WithQuestion(random.RandString())
	r.WithAddAnswers(random.RandString())
	r.WithEditAnswers(random.RandString())
	r.WithDeleteAnswers(random.RandString())
	r.WithEndDate(random.RandInt())
	r.WithPhotoId(random.RandInt())
	r.WithBackgroundId(random.RandInt())
}

func TestVKPollsEditSuccess(t *testing.T) {
	params := requests.NewPollsEditRequest()
	fillRandomlyPollsEditRequest(&params)
	var expected models.BaseOkResponse
	fillRandomlyBaseOkResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.RandString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "polls.edit", params.Params(), expectedJSON))
	resp, err := vk.Api.Polls.PollsEdit(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func TestVKPollsGetBackgroundsSuccess(t *testing.T) {
	var expected models.PollsGetBackgroundsResponse
	fillRandomlyPollsGetBackgroundsResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.RandString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "polls.getBackgrounds", nil, expectedJSON))
	resp, err := vk.Api.Polls.PollsGetBackgrounds()
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyPollsGetByIdRequest(r *requests.PollsGetByIdRequest) {
	r.WithOwnerId(random.RandInt())
	r.WithIsBoard(random.RandBool())
	r.WithPollId(random.RandInt())
	r.WithExtended(random.RandBool())
	r.WithFriendsCount(random.RandInt())
	lFields := random.RandIntn(random.MaxArrayLength + 1)
	r.WithFields(random.RandStringArr(lFields))
	r.WithNameCase(random.RandString())
}

func TestVKPollsGetByIdSuccess(t *testing.T) {
	params := requests.NewPollsGetByIdRequest()
	fillRandomlyPollsGetByIdRequest(&params)
	var expected models.PollsGetByIdResponse
	fillRandomlyPollsGetByIdResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.RandString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "polls.getById", params.Params(), expectedJSON))
	resp, err := vk.Api.Polls.PollsGetById(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyPollsGetPhotoUploadServerRequest(r *requests.PollsGetPhotoUploadServerRequest) {
	r.WithOwnerId(random.RandInt())
}

func TestVKPollsGetPhotoUploadServerSuccess(t *testing.T) {
	params := requests.NewPollsGetPhotoUploadServerRequest()
	fillRandomlyPollsGetPhotoUploadServerRequest(&params)
	var expected models.BaseGetUploadServerResponse
	fillRandomlyBaseGetUploadServerResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.RandString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "polls.getPhotoUploadServer", params.Params(), expectedJSON))
	resp, err := vk.Api.Polls.PollsGetPhotoUploadServer(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyPollsGetVotersRequest(r *requests.PollsGetVotersRequest) {
	r.WithOwnerId(random.RandInt())
	r.WithPollId(random.RandInt())
	lAnswerIds := random.RandIntn(random.MaxArrayLength + 1)
	r.WithAnswerIds(random.RandIntArr(lAnswerIds))
	r.WithIsBoard(random.RandBool())
	r.WithFriendsOnly(random.RandBool())
	r.WithOffset(random.RandInt())
	r.WithCount(random.RandInt())
	Fields := new([]models.UsersFields)
	lFields := random.RandIntn(random.MaxArrayLength + 1)
	*Fields = make([]models.UsersFields, lFields)
	for i0 := 0; i0 < lFields; i0++ {
		fillRandomlyUsersFields(&(*Fields)[i0])
	}
	r.WithFields(*Fields)
	r.WithNameCase(random.RandString())
}

func TestVKPollsGetVotersSuccess(t *testing.T) {
	params := requests.NewPollsGetVotersRequest()
	fillRandomlyPollsGetVotersRequest(&params)
	var expected models.PollsGetVotersResponse
	fillRandomlyPollsGetVotersResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.RandString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "polls.getVoters", params.Params(), expectedJSON))
	resp, err := vk.Api.Polls.PollsGetVoters(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyPollsSavePhotoRequest(r *requests.PollsSavePhotoRequest) {
	r.WithPhoto(random.RandString())
	r.WithHash(random.RandString())
}

func TestVKPollsSavePhotoSuccess(t *testing.T) {
	params := requests.NewPollsSavePhotoRequest()
	fillRandomlyPollsSavePhotoRequest(&params)
	var expected models.PollsSavePhotoResponse
	fillRandomlyPollsSavePhotoResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.RandString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "polls.savePhoto", params.Params(), expectedJSON))
	resp, err := vk.Api.Polls.PollsSavePhoto(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}
