// Code generated by https://github.com/defany/govk. DO NOT EDIT.

package tests

import (
	"github.com/defany/govk/api/gen/models"
	"github.com/defany/govk/api/gen/leadforms"
	"github.com/stretchr/testify/assert"
	"github.com/stretchr/testify/require"
	"github.com/defany/govk/vk"
	"testing"
	"encoding/json"
)

func fillRandomlyLeadFormsCreateRequest(r *requests.LeadFormsCreateRequest) {
	r.WithGroupId(randInt())
	r.WithName(randString())
	r.WithTitle(randString())
	r.WithDescription(randString())
	r.WithQuestions(randString())
	r.WithPolicyLinkUrl(randString())
	r.WithPhoto(randString())
	r.WithConfirmation(randString())
	r.WithSiteLinkUrl(randString())
	r.WithActive(randBool())
	r.WithOncePerUser(randBool())
	r.WithPixelCode(randString())
	lNotifyAdmins := randIntn(maxArrayLength + 1)
	r.WithNotifyAdmins(randIntArr(lNotifyAdmins))
	lNotifyEmails := randIntn(maxArrayLength + 1)
	r.WithNotifyEmails(randStringArr(lNotifyEmails))
}

func TestVKLeadFormsCreateSuccess(t *testing.T) {
	params := requests.NewLeadFormsCreateRequest()
	fillRandomlyLeadFormsCreateRequest(&params)
	var expected models.LeadFormsCreateResponse
	fillRandomlyLeadFormsCreateResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "leadForms.create", params.Params(), expectedJSON))
	resp, err := vk.Api.LeadForms.LeadFormsCreate(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyLeadFormsDeleteRequest(r *requests.LeadFormsDeleteRequest) {
	r.WithGroupId(randInt())
	r.WithFormId(randInt())
}

func TestVKLeadFormsDeleteSuccess(t *testing.T) {
	params := requests.NewLeadFormsDeleteRequest()
	fillRandomlyLeadFormsDeleteRequest(&params)
	var expected models.LeadFormsDeleteResponse
	fillRandomlyLeadFormsDeleteResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "leadForms.delete", params.Params(), expectedJSON))
	resp, err := vk.Api.LeadForms.LeadFormsDelete(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyLeadFormsGetRequest(r *requests.LeadFormsGetRequest) {
	r.WithGroupId(randInt())
	r.WithFormId(randInt())
}

func TestVKLeadFormsGetSuccess(t *testing.T) {
	params := requests.NewLeadFormsGetRequest()
	fillRandomlyLeadFormsGetRequest(&params)
	var expected models.LeadFormsGetResponse
	fillRandomlyLeadFormsGetResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "leadForms.get", params.Params(), expectedJSON))
	resp, err := vk.Api.LeadForms.LeadFormsGet(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyLeadFormsGetLeadsRequest(r *requests.LeadFormsGetLeadsRequest) {
	r.WithGroupId(randInt())
	r.WithFormId(randInt())
	r.WithLimit(randInt())
	r.WithNextPageToken(randString())
}

func TestVKLeadFormsGetLeadsSuccess(t *testing.T) {
	params := requests.NewLeadFormsGetLeadsRequest()
	fillRandomlyLeadFormsGetLeadsRequest(&params)
	var expected models.LeadFormsGetLeadsResponse
	fillRandomlyLeadFormsGetLeadsResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "leadForms.getLeads", params.Params(), expectedJSON))
	resp, err := vk.Api.LeadForms.LeadFormsGetLeads(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func TestVKLeadFormsGetUploadURLSuccess(t *testing.T) {
	var expected models.LeadFormsUploadUrlResponse
	fillRandomlyLeadFormsUploadUrlResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "leadForms.getUploadURL", nil, expectedJSON))
	resp, err := vk.Api.LeadForms.LeadFormsGetUploadURL()
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyLeadFormsListRequest(r *requests.LeadFormsListRequest) {
	r.WithGroupId(randInt())
}

func TestVKLeadFormsListSuccess(t *testing.T) {
	params := requests.NewLeadFormsListRequest()
	fillRandomlyLeadFormsListRequest(&params)
	var expected models.LeadFormsListResponse
	fillRandomlyLeadFormsListResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "leadForms.list", params.Params(), expectedJSON))
	resp, err := vk.Api.LeadForms.LeadFormsList(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyLeadFormsUpdateRequest(r *requests.LeadFormsUpdateRequest) {
	r.WithGroupId(randInt())
	r.WithFormId(randInt())
	r.WithName(randString())
	r.WithTitle(randString())
	r.WithDescription(randString())
	r.WithQuestions(randString())
	r.WithPolicyLinkUrl(randString())
	r.WithPhoto(randString())
	r.WithConfirmation(randString())
	r.WithSiteLinkUrl(randString())
	r.WithActive(randBool())
	r.WithOncePerUser(randBool())
	r.WithPixelCode(randString())
	lNotifyAdmins := randIntn(maxArrayLength + 1)
	r.WithNotifyAdmins(randIntArr(lNotifyAdmins))
	lNotifyEmails := randIntn(maxArrayLength + 1)
	r.WithNotifyEmails(randStringArr(lNotifyEmails))
}

func TestVKLeadFormsUpdateSuccess(t *testing.T) {
	params := requests.NewLeadFormsUpdateRequest()
	fillRandomlyLeadFormsUpdateRequest(&params)
	var expected models.LeadFormsCreateResponse
	fillRandomlyLeadFormsCreateResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := randString()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "leadForms.update", params.Params(), expectedJSON))
	resp, err := vk.Api.LeadForms.LeadFormsUpdate(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

