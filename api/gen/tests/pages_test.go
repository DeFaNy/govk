// Code generated by https://github.com/defany/govk. DO NOT EDIT.

package tests

import (
	"encoding/json"
	"github.com/defany/govk/api/gen/models"
	"github.com/defany/govk/api/gen/pages"
	"github.com/defany/govk/pkg/random"
	"github.com/defany/govk/vk"
	"github.com/stretchr/testify/assert"
	"github.com/stretchr/testify/require"
	"testing"
)

func fillRandomlyPagesClearCacheRequest(r *requests.PagesClearCacheRequest) {
	r.WithUrl(random.String())
}

func TestVKPagesClearCacheSuccess(t *testing.T) {
	params := requests.NewPagesClearCacheRequest()
	fillRandomlyPagesClearCacheRequest(&params)
	var expected models.BaseOkResponse
	fillRandomlyBaseOkResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.String()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "pages.clearCache", params.Params(), expectedJSON))
	resp, err := vk.Api.Pages.PagesClearCache(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyPagesGetRequest(r *requests.PagesGetRequest) {
	r.WithOwnerId(random.Int())
	r.WithPageId(random.Int())
	r.WithGlobal(random.Bool())
	r.WithSitePreview(random.Bool())
	r.WithTitle(random.String())
	r.WithNeedSource(random.Bool())
	r.WithNeedHtml(random.Bool())
}

func TestVKPagesGetSuccess(t *testing.T) {
	params := requests.NewPagesGetRequest()
	fillRandomlyPagesGetRequest(&params)
	var expected models.PagesGetResponse
	fillRandomlyPagesGetResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.String()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "pages.get", params.Params(), expectedJSON))
	resp, err := vk.Api.Pages.PagesGet(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyPagesGetHistoryRequest(r *requests.PagesGetHistoryRequest) {
	r.WithPageId(random.Int())
	r.WithGroupId(random.Int())
	r.WithUserId(random.Int())
}

func TestVKPagesGetHistorySuccess(t *testing.T) {
	params := requests.NewPagesGetHistoryRequest()
	fillRandomlyPagesGetHistoryRequest(&params)
	var expected models.PagesGetHistoryResponse
	fillRandomlyPagesGetHistoryResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.String()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "pages.getHistory", params.Params(), expectedJSON))
	resp, err := vk.Api.Pages.PagesGetHistory(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyPagesGetTitlesRequest(r *requests.PagesGetTitlesRequest) {
	r.WithGroupId(random.Int())
}

func TestVKPagesGetTitlesSuccess(t *testing.T) {
	params := requests.NewPagesGetTitlesRequest()
	fillRandomlyPagesGetTitlesRequest(&params)
	var expected models.PagesGetTitlesResponse
	fillRandomlyPagesGetTitlesResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.String()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "pages.getTitles", params.Params(), expectedJSON))
	resp, err := vk.Api.Pages.PagesGetTitles(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyPagesGetVersionRequest(r *requests.PagesGetVersionRequest) {
	r.WithVersionId(random.Int())
	r.WithGroupId(random.Int())
	r.WithUserId(random.Int())
	r.WithNeedHtml(random.Bool())
}

func TestVKPagesGetVersionSuccess(t *testing.T) {
	params := requests.NewPagesGetVersionRequest()
	fillRandomlyPagesGetVersionRequest(&params)
	var expected models.PagesGetVersionResponse
	fillRandomlyPagesGetVersionResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.String()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "pages.getVersion", params.Params(), expectedJSON))
	resp, err := vk.Api.Pages.PagesGetVersion(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyPagesParseWikiRequest(r *requests.PagesParseWikiRequest) {
	r.WithText(random.String())
	r.WithGroupId(random.Int())
}

func TestVKPagesParseWikiSuccess(t *testing.T) {
	params := requests.NewPagesParseWikiRequest()
	fillRandomlyPagesParseWikiRequest(&params)
	var expected models.PagesParseWikiResponse
	fillRandomlyPagesParseWikiResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.String()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "pages.parseWiki", params.Params(), expectedJSON))
	resp, err := vk.Api.Pages.PagesParseWiki(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyPagesSaveRequest(r *requests.PagesSaveRequest) {
	r.WithText(random.String())
	r.WithPageId(random.Int())
	r.WithGroupId(random.Int())
	r.WithUserId(random.Int())
	r.WithTitle(random.String())
}

func TestVKPagesSaveSuccess(t *testing.T) {
	params := requests.NewPagesSaveRequest()
	fillRandomlyPagesSaveRequest(&params)
	var expected models.PagesSaveResponse
	fillRandomlyPagesSaveResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.String()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "pages.save", params.Params(), expectedJSON))
	resp, err := vk.Api.Pages.PagesSave(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}

func fillRandomlyPagesSaveAccessRequest(r *requests.PagesSaveAccessRequest) {
	r.WithPageId(random.Int())
	r.WithGroupId(random.Int())
	r.WithUserId(random.Int())
	r.WithView(random.Int())
	r.WithEdit(random.Int())
}

func TestVKPagesSaveAccessSuccess(t *testing.T) {
	params := requests.NewPagesSaveAccessRequest()
	fillRandomlyPagesSaveAccessRequest(&params)
	var expected models.PagesSaveAccessResponse
	fillRandomlyPagesSaveAccessResponse(&expected)
	expectedJSON, err := json.Marshal(expected)
	require.NoError(t, err)
	token := random.String()
	vk, err := govk.NewVK(token)
	assert.NoError(t, err)
	vk.Api.WithHTTP(NewTestClient(t, "pages.saveAccess", params.Params(), expectedJSON))
	resp, err := vk.Api.Pages.PagesSaveAccess(params)
	assert.EqualValues(t, expected, resp)
	assert.NoError(t, err)
}
